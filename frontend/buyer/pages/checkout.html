<main class="container">
  <h2 class="mb-4"><i class="uil uil-shield-check"></i> Secure Checkout</h2>

  <div class="row g-5">
    <div class="col-md-7 col-lg-8">
      <!-- Account -->
      <div class="mb-4 p-3 border rounded bg-white shadow-sm">
        <h3 class="h5"><i class="uil uil-user-circle"></i> Account</h3>
        <p class="mb-0">
          You are signed in as <strong id="email-account" class="text-primary">N/A</strong>. We'll use
          your email address to send your order confirmation.
        </p>
      </div>

      <!-- Checkout form -->
      <form id="checkout-form" class="p-4 border rounded bg-white shadow-sm">
        <h3 class="h5 mb-3"><i class="uil uil-truck"></i> Shipping & Payment</h3>
        <!-- Shipping address -->
        <div class="mb-3">
          <label for="checkout-address" class="form-label">Shipping to</label>
          <div class="input-group">
            <select name="delivery_address_id" id="checkout-address" class="form-select"></select>
            <button type="button" id="create-address-btn" class="btn btn-dark btn-sm">
              <i class="uil uil-plus"></i> New Address
            </button>
          </div>
          <span id="address-msg" class="form-text text-danger"></span>
        </div>

        <!-- Payment method -->
        <div class="mb-4">
          <label for="checkout-method" class="form-label">Payment Method</label>
          <select id="checkout-method" class="form-select">
            <option value="1">Cash on delivery</option>
            <option value="2">Credit card</option>
            <option value="3">Debit card</option>
          </select>
          <!-- Credit card form if select card payment -->
          <div id="checkout-card-form" class="mt-3 p-3 border rounded bg-light" style="display: none;">
            <h4 class="h6 mb-3">Fill your card information</h4>

            <div class="mb-3">
              <label for="checkout-card-number" class="form-label">Card Number</label>
              <input
                type="text"
                id="checkout-card-number"
                name="card_number"
                class="form-control"
                placeholder="1234 5678 9012 3456"
              />
              <span id="card-number-msg" class="form-text text-danger"></span>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="checkout-card-expiry-date" class="form-label">Expiry Date</label>
                <input
                  type="text"
                  id="checkout-card-expiry-date"
                  name="card_expiry_date"
                  class="form-control"
                  placeholder="MM/YY"
                />
                <span id="card-expiry-date-msg" class="form-text text-danger"></span>
              </div>

              <div class="col-md-6 mb-3">
                <label for="checkout-card-cvc" class="form-label">CVC</label>
                <input
                  type="text"
                  id="checkout-card-cvc"
                  name="card_cvc"
                  class="form-control"
                  placeholder="123"
                />
                <span id="card-cvc-msg" class="form-text text-danger"></span>
              </div>
            </div>

            <div class="mb-3">
              <label for="checkout-card-holder-name" class="form-label">Cardholder Name</label>
              <input
                type="text"
                id="checkout-card-holder-name"
                name="card_holder_name"
                class="form-control"
                placeholder="John Doe"
              />
              <span id="card-holder-name-msg" class="form-text text-danger"></span>
            </div>
          </div>
        </div>

        <button type="submit" id="checkout-submit-btn" class="btn btn-dark w-100 btn-sm">
          <i class="uil uil-check-circle"></i> Place Order
        </button>
        <div id="checkout-msg" class="form-text mt-2 text-center"></div>
      </form>
    </div>

    <!-- Order summary -->
    <div class="col-md-5 col-lg-4 order-md-last">
      <div id="order-summary" class="p-4 border rounded bg-white shadow-sm">
        <!-- Order summary content will be loaded here by JS -->
        <h3 class="h5 d-flex justify-content-between align-items-center mb-3">
          <span class="text-primary"><i class="uil uil-receipt"></i> Order Summary</span>
          <span class="badge bg-primary rounded-pill">
            <i class="uil uil-shopping-bag me-1"></i><span id="order-summary-item-count">0</span> items
          </span> <!-- Example, update with JS -->
        </h3>
        <!-- Items will be listed here -->
        <!-- Total will be shown here -->
      </div>
    </div>
  </div>
</main>

<div id="backdrop" class="backdrop--g" style="display: none">
  <!-- Modal content for creating address can be placed here or loaded dynamically -->
</div>

<script type="module" src="./controllers/checkout.js"></script>
